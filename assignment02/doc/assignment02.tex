\documentclass{article}

\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{minted}
\usepackage{color}
\usepackage[english]{babel}

%
% Basic Document Settings
%

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName}
\chead{\hmwkClass\ (\hmwkClassInstructor): \hmwkTitle}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\setlength\parindent{0pt}
\setlength{\parskip}{1em}

%
% Minted Settings
%

\setminted{frame=lines}
\setminted{linenos}
\setminted{autogobble}

%
% Create Problem Sections
%

\newcommand{\enterProblemHeader}[1]{
    \nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \stepcounter{#1}
    \nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\setcounter{secnumdepth}{0}
\newcounter{partCounter}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

%
% Homework Problem Environment
%
% This environment takes an optional argument. When given, it will adjust the
% problem counter. This is useful for when the problems given for your
% assignment aren't sequential. See the last 3 problems of this template for an
% example.
%
\newenvironment{homeworkProblem}[1][-1]{
    \ifnum#1>0
        \setcounter{homeworkProblemCounter}{#1}
    \fi
    \section{Problem \arabic{homeworkProblemCounter}}
    \setcounter{partCounter}{1}
    \enterProblemHeader{homeworkProblemCounter}
}{
    \exitProblemHeader{homeworkProblemCounter}
}

%
% Homework Details
%   - Title
%   - Due date
%   - Class
%   - Section/Time
%   - Instructor
%   - Author
%

\newcommand{\hmwkTitle}{Assignment\ \#1}
\newcommand{\hmwkDueDate}{February 05, 2019}
\newcommand{\hmwkClass}{CSE 6431}
\newcommand{\hmwkClassInstructor}{Professor Qin}
\newcommand{\hmwkAuthorName}{\textbf{Jeremy Grifski}}

%
% Title Page
%

\title{
    \vspace{2in}
    \textmd{\textbf{\hmwkClass:\ \hmwkTitle}}\\
    \normalsize\vspace{0.1in}\small{Due\ on\ \hmwkDueDate\ at 11:10am}\\
    \vspace{0.1in}\large{\textit{\hmwkClassInstructor}}
    \vspace{3in}
}

\author{\hmwkAuthorName}
\date{}

\renewcommand{\part}[1]{\textbf{\large Part \Alph{partCounter}}\stepcounter{partCounter}\\}

%
% Various Helper Commands
%


% For derivatives
\newcommand{\deriv}[1]{\frac{\mathrm{d}}{\mathrm{d}x} (#1)}

% For partial derivatives
\newcommand{\pderiv}[2]{\frac{\partial}{\partial #1} (#2)}

% Integral dx
\newcommand{\dx}{\mathrm{d}x}

% Alias for the Solution section header
\newcommand{\solution}{\textbf{\large Solution}}

% Probability commands: Expectation, Variance, Covariance, Bias
\newcommand{\E}{\mathrm{E}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Bias}{\mathrm{Bias}}

\begin{document}

\maketitle

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Lamport’ algorithm requires messages to be delivered in FIFO
        order between every pair of sites. Does Ricart-Agrawala’s algorithm
        require the same assumption to work? Explain your answer.
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Show that in Lamport’s distributed mutual exclusion algorithm, the
        critical section is accessed according to the increasing order
        of timestamps. Then, show that the same property holds true in
        Ricart-Agrawal’s distributed mutual exclusion algorithm. Does the same
        hold true in Maekawa’s algorithm?
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        If two logs are equivalent, are their serializationgraphs identical? If
        yes, show your proof. Otherwise, give me a counter-example.
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Consider a database system in which a set oftransactions are executed.
        There are two requirements for correct execution of the transactions.
        First, the log of execution of operations in these transactions must be
        serializable. Second, the equivalent serial execution must follow a
        given partial order among the transactions. Describe a concise approach
        for verifying that the above two conditions are met by a log.
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Assume a system has P processes and R identical units of a reusable
        resource. If each process can claim at most N units of a resource, show
        that the system will be deadlock free if and only if R >= P(N-1) + 1.
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Consider a system consisting of m resources of the same type, being
        shared by n processes. Resources can be requested or released by
        processes only one at a time. Show that the system is deadlock free if
        the following two conditions hold:
        1) the maximum need of each process is between 1 and m resources, and
        2) the sum of all maximum needs is less than m + n.
    }

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

    \textbf{
        Using Java support for multithreading (Synchronized, wait, and notifyall),
        write a solution to the readers-writers problem, with exclusive writer access,
        concurrent reader access, and reader’s priority. Submit your solution on paper
        (i.e. do not worry about exact syntax or debugging).
    }

    In this solution, I tried to model everything after the existing readers and
    writers solution using monitors. Instead of using a busy flag, I used a
    writers count which serves the exact same purpose. Since there are no queues
    to control directly, I notify all every time a process finishes and let the
    start loops sort everything out.

    Once again, you'll notice that I don't provide the Reader and Writer clases
    as they're more or less not important. The main shared resource logic
    is here in the SharedFile class. Regardless, the class stubs would look
    similar to the ones displayed in the previous problem.

    \begin{minted}{java}
        /**
         * A shared file with functionality for reading and writing.
         *
         * @author Jeremy Grifski
         */
        public class SharedFile {

          private int readCount;
          private int writeCount;

          public SharedFile() {
            this.readCount = 0;
            this.writeCount = 0;
          }

          /**
           * A start read method which kicks off reading iff there are no writers.
           */
          public synchronized void startRead() {
            while (writeCount > 0) {
              try {
                wait();
              } catch (InterruptedException e) {
                System.out.println("Reader wants to read!");
              }
            }
            readCount++;
            notifyAll();
          }

          /**
           * An end read method which notifies everyone when there are no readers left.
           */
          public synchronized void endRead() {
            readCount--;
            if (this.readCount == 0) {
              notifyAll();
            }
          }

          /**
           * A start write method which kicks off writing if there are no other readers
           * or writers.
           */
          public synchronized void startWrite() {
            while (readCount > 0 || writeCount > 0) {
              try {
                wait();
              } catch (InterruptedException e) {
                System.out.println("Writer wants to write!")
              }
            }
            writeCount++;
          }

          /**
           * An end write method whichs notifies everyone when writing is done.
           */
          public synchronized void endWrite() {
            writeCount--;
            notifyAll();
          }

        }
    \end{minted}

\end{homeworkProblem}

\end{document}
